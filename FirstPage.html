<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ù–∞—Ö—Ä–∞–Ω–∏ —Å–µ —Ç–∞–º - –í–∫—É—Å–Ω–æ!</title>
    <link rel="stylesheet" href="FirstPage.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Amatic+SC:wght@400;700&display=swap" rel="stylesheet">
    
    <!-- Leaflet CSS from CDN -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    
  
</head>

<body>

<div class="square">
    <div class="button"> 
        <a href="StartPage.html" class="button-link">–ù–∞—á–∞–ª–æ</a>
    </div>
    <div class="button2"> 
        <a href="rec-res.php" class="button-link">–ü—Ä–µ–ø–æ—Ä—ä—á–≤–∞–Ω–µ –Ω–∞ –†–µ—Å—Ç–æ—Ä–∞–Ω—Ç</a>
    </div>
    <div class="button4"> 
        <a href="LoginPage.php" class="button-link">–í–ª–∏–∑–∞–Ω–µ</a>
    </div>
    <div class="button5"> 
        <a href="Sign_up.php" class="button-link">–†–µ–≥–∏—Å—Ç—Ä–∏—Ä–∞–Ω–µ</a>
    </div>
</div>

<!-- Map Container (where the image was) -->
<div id="map"></div>

<!-- Leaflet JavaScript from CDN -->
<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
      
      <script>
      
      document.addEventListener("DOMContentLoaded", function () {
    fetch('get-data.php')
        .then(response => response.json())
        .then(data => {
            if (!Array.isArray(data)) {  
                console.error("Expected an array but got:", data);
                return;
            }

            // Initialize the map
            var map = L.map('map').setView([43.217715, 27.905228], 13); 

            // Add OpenStreetMap tiles
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
            }).addTo(map);

            // Loop through restaurant data and add markers
            data.forEach(restaurant => {
                let name = restaurant.name;
                let menu = restaurant.menu;
                let address = restaurant.address;
                let phone = restaurant.phone;
                let longitude = parseFloat(restaurant.longitude); // Convert to number
                let latitude = parseFloat(restaurant.latitude);   // Convert to number

                // Ensure valid coordinates
                if (!isNaN(latitude) && !isNaN(longitude)) {
                    // Create marker and add to map
                    L.marker([latitude, longitude]).addTo(map)
                        .bindPopup(`<b>${name}</b><br>üìú ${menu}<br>üìç ${address}<br>üìû ${phone}`);
                } else {
                    console.warn("Invalid coordinates for restaurant:", restaurant);
                }
            });
        })
        .catch(error => console.error("Fetch error:", error));
});
</script>



</body>
</html>
